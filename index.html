<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NAMA Sepa & Marine &times; Flexeet | Proposal Smart Reservation System</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;0,9..40,800;1,9..40,400&family=Fraunces:opsz,wght@9..144,400;9..144,600;9..144,700;9..144,800&display=swap" rel="stylesheet">
    <style>
        :root{--bg:#FAFAF7;--bg-alt:#F3F1EC;--bg-dark:#1A1D23;--bg-darker:#12141A;--surface:#FFFFFF;--text:#1A1D23;--text-secondary:#5A5D63;--text-muted:#8A8D93;--text-on-dark:#E8E6E1;--accent:#2D7A6F;--accent-light:#E8F4F1;--accent-dark:#1E5C54;--gold:#C8A45C;--gold-light:#FBF5E8;--coral:#D4654A;--coral-light:#FDF0EC;--navy:#2A3F5F;--navy-light:#EDF0F5;--border:#E5E2DC;--border-light:#EDEBE6;--shadow-sm:0 1px 3px rgba(26,29,35,.04),0 1px 2px rgba(26,29,35,.06);--shadow-md:0 4px 14px rgba(26,29,35,.06),0 2px 6px rgba(26,29,35,.04);--shadow-lg:0 12px 40px rgba(26,29,35,.08),0 4px 12px rgba(26,29,35,.04);--shadow-xl:0 24px 60px rgba(26,29,35,.1);--radius:16px;--radius-sm:10px;--radius-xs:6px;--container:1140px}
        *,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
        html{scroll-behavior:smooth;font-size:16px}
        body{font-family:'DM Sans',-apple-system,sans-serif;background:var(--bg);color:var(--text);line-height:1.65;-webkit-font-smoothing:antialiased;overflow-x:hidden}
        h1,h2,h3,h4{font-family:'Fraunces',Georgia,serif;line-height:1.2}
        a{text-decoration:none;color:inherit}img{max-width:100%;display:block}ul{list-style:none}
        .container{max-width:var(--container);margin:0 auto;padding:0 24px}
        @keyframes fadeUp{from{opacity:0;transform:translateY(36px)}to{opacity:1;transform:translateY(0)}}
        @keyframes fadeIn{from{opacity:0}to{opacity:1}}
        @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-14px)}}
        @keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}
        @keyframes barFill{to{width:85%}}
        @keyframes shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}
        @keyframes shake{0%,100%{transform:translateX(0)}20%,60%{transform:translateX(-6px)}40%,80%{transform:translateX(6px)}}
        .reveal{opacity:0;transform:translateY(36px);transition:opacity .7s cubic-bezier(.16,1,.3,1),transform .7s cubic-bezier(.16,1,.3,1)}
        .reveal.visible{opacity:1;transform:translateY(0)}
        .reveal-delay-1{transition-delay:.1s}.reveal-delay-2{transition-delay:.2s}.reveal-delay-3{transition-delay:.3s}.reveal-delay-4{transition-delay:.4s}.reveal-delay-5{transition-delay:.5s}.reveal-delay-6{transition-delay:.6s}
        .card-hover{transition:transform .3s ease,box-shadow .3s ease}
        .card-hover:hover{transform:translateY(-6px);box-shadow:var(--shadow-lg)}
        .center{text-align:center}
        .btn-primary{background:var(--accent);color:white;border:none;padding:16px 32px;border-radius:50px;font-weight:700;font-size:1rem;cursor:pointer;transition:all .3s;display:inline-flex;align-items:center;gap:10px;font-family:'DM Sans',sans-serif;box-shadow:0 8px 24px rgba(45,122,111,.25)}
        .btn-primary:hover{background:var(--accent-dark);transform:translateY(-2px);box-shadow:0 12px 32px rgba(45,122,111,.3)}
        .btn-secondary{background:none;border:2px solid var(--border);color:var(--text);padding:14px 28px;border-radius:50px;font-weight:600;font-size:.95rem;cursor:pointer;transition:all .2s;font-family:'DM Sans',sans-serif}
        .btn-secondary:hover{border-color:var(--accent);color:var(--accent)}
        .section-tag{display:inline-block;padding:6px 16px;border-radius:50px;font-size:.72rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;margin-bottom:16px}
        .section-tag.coral{background:var(--coral-light);color:var(--coral)}.section-tag.accent{background:var(--accent-light);color:var(--accent)}.section-tag.gold{background:var(--gold-light);color:var(--gold)}.section-tag.navy{background:var(--navy-light);color:var(--navy)}
        .section-title{font-size:clamp(2rem,3.5vw,2.8rem);font-weight:800;margin-bottom:12px;letter-spacing:-1px}
        .section-subtitle{font-size:1.05rem;color:var(--text-secondary);max-width:560px;margin-bottom:56px;line-height:1.7}
        .section-subtitle.center{margin-left:auto;margin-right:auto}
        @media(max-width:768px){:root{--container:100%}html{font-size:15px}}

        /* ============================================
           PASSWORD SCREEN
           ============================================ */
        #lock-screen {
            position: fixed; inset: 0; z-index: 9999;
            background: linear-gradient(135deg, #1A1D23 0%, #0F1117 50%, #1A1D23 100%);
            display: flex; align-items: center; justify-content: center;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }
        #lock-screen.unlocked {
            opacity: 0; visibility: hidden; pointer-events: none;
        }
        .lock-card {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 24px;
            padding: 48px 40px;
            max-width: 420px; width: 90%;
            text-align: center;
            backdrop-filter: blur(20px);
            box-shadow: 0 32px 80px rgba(0,0,0,0.4);
        }
        .lock-logo {
            width: 64px; height: 64px;
            background: linear-gradient(135deg, var(--accent), var(--accent-dark));
            border-radius: 18px;
            display: flex; align-items: center; justify-content: center;
            margin: 0 auto 24px;
            box-shadow: 0 8px 32px rgba(45,122,111,0.3);
        }
        .lock-logo svg { width: 32px; height: 32px; stroke: white; }
        .lock-title {
            font-family: 'Fraunces', serif;
            font-size: 1.4rem; font-weight: 700;
            color: white; margin-bottom: 8px;
        }
        .lock-subtitle {
            font-size: 0.88rem; color: rgba(255,255,255,0.45);
            margin-bottom: 32px;
        }
        .lock-input-wrap {
            position: relative; margin-bottom: 16px;
        }
        .lock-input {
            width: 100%; padding: 16px 52px 16px 20px;
            background: rgba(255,255,255,0.06);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 14px;
            color: white; font-size: 1rem;
            font-family: 'DM Sans', sans-serif;
            outline: none;
            transition: border-color 0.3s;
        }
        .lock-input::placeholder { color: rgba(255,255,255,0.25); }
        .lock-input:focus { border-color: var(--accent); }
        .lock-input.error {
            border-color: var(--coral);
            animation: shake 0.4s ease;
        }
        .lock-toggle-pw {
            position: absolute; right: 16px; top: 50%; transform: translateY(-50%);
            background: none; border: none; cursor: pointer; padding: 4px;
        }
        .lock-toggle-pw svg { width: 20px; height: 20px; stroke: rgba(255,255,255,0.3); }
        .lock-toggle-pw:hover svg { stroke: rgba(255,255,255,0.6); }
        .lock-btn {
            width: 100%; padding: 16px;
            background: linear-gradient(135deg, var(--accent), var(--accent-dark));
            color: white; border: none; border-radius: 14px;
            font-weight: 700; font-size: 1rem;
            cursor: pointer; transition: all 0.3s;
            font-family: 'DM Sans', sans-serif;
            box-shadow: 0 8px 24px rgba(45,122,111,0.3);
        }
        .lock-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(45,122,111,0.4);
        }
        .lock-btn:disabled {
            opacity: 0.5; cursor: not-allowed; transform: none;
        }
        .lock-error-msg {
            color: var(--coral); font-size: 0.82rem;
            margin-top: 12px; min-height: 20px;
            transition: opacity 0.3s;
        }
        .lock-footer {
            margin-top: 32px; padding-top: 24px;
            border-top: 1px solid rgba(255,255,255,0.06);
        }
        .lock-footer p {
            font-size: 0.75rem; color: rgba(255,255,255,0.25);
            line-height: 1.6;
        }
        .lock-footer span { color: var(--accent); font-weight: 600; }

        /* Loading spinner */
        .lock-spinner {
            display: none; width: 20px; height: 20px;
            border: 2px solid rgba(255,255,255,0.2);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.6s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* Main content hidden until unlocked */
        #main-content {
            display: none;
        }
        #main-content.visible {
            display: block;
            animation: fadeIn 0.6s ease;
        }
    </style>
</head>
<body>

<!-- ============================================
     PASSWORD SCREEN (AES-256-GCM Encrypted)
     Password tidak tersimpan di source code.
     ============================================ -->
<div id="lock-screen">
    <div class="lock-card">
        <div class="lock-logo">
            <svg viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
            </svg>
        </div>
        <div class="lock-title">Dokumen Terkunci</div>
        <p class="lock-subtitle">Masukkan password untuk mengakses proposal ini</p>
        <form id="lock-form" autocomplete="off">
            <div class="lock-input-wrap">
                <input type="password" id="lock-password" class="lock-input" placeholder="Masukkan password..." autofocus autocomplete="off">
                <button type="button" class="lock-toggle-pw" onclick="togglePw()">
                    <svg id="eye-icon" viewBox="0 0 24 24" fill="none" stroke-width="2">
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                        <circle cx="12" cy="12" r="3"/>
                    </svg>
                </button>
            </div>
            <button type="submit" class="lock-btn" id="lock-submit">
                <span id="btn-text">Buka Dokumen</span>
                <div class="lock-spinner" id="lock-spinner"></div>
            </button>
        </form>
        <div class="lock-error-msg" id="lock-error"></div>
        <div class="lock-footer">
            <p>Proposal eksklusif untuk <span>NAMA Sepa & Marine</span><br>oleh Flexeet Technology</p>
        </div>
    </div>
</div>

<!-- ============================================
     MAIN CONTENT (loaded after password verified)
     ============================================ -->
<div id="main-content"></div>

<script>
(function(){
    // Encrypted verification token (AES-256-GCM)
    // Password TIDAK tersimpan di source code
    var _t = 'l+CsE7ZtZC0dKTmGPTYEKaaClXAYwSpcz257YSVHE8TS2rnKvNQ2OQRzxUqTQchixa/QNxpX+mivjmAoEYMdsD8TpG2RBOQ4Dn8YItvw+K4D';

    // Section files to load
    var _s = [
        '01-header.html','02-hero.html','03-masalah.html','04-solusi.html',
        '05-modul.html','06-cara-kerja.html','07-investasi.html','08-roi.html',
        '09-timeline.html','10-garansi.html','11-cta.html','12-footer.html'
    ];

    // Base64 to ArrayBuffer
    function b64ToAb(b64) {
        var bin = atob(b64), len = bin.length, ab = new Uint8Array(len);
        for (var i = 0; i < len; i++) ab[i] = bin.charCodeAt(i);
        return ab.buffer;
    }

    // Verify password using AES-256-GCM
    async function verifyPassword(pw) {
        try {
            var data = new Uint8Array(b64ToAb(_t));
            var salt = data.slice(0, 16);
            var iv = data.slice(16, 28);
            var authTag = data.slice(28, 44);
            var ciphertext = data.slice(44);

            // Combine ciphertext + authTag for Web Crypto (it expects them together)
            var combined = new Uint8Array(ciphertext.length + authTag.length);
            combined.set(ciphertext);
            combined.set(authTag, ciphertext.length);

            // Import password as key material
            var keyMaterial = await crypto.subtle.importKey(
                'raw',
                new TextEncoder().encode(pw),
                'PBKDF2',
                false,
                ['deriveKey']
            );

            // Derive AES key
            var key = await crypto.subtle.deriveKey(
                { name: 'PBKDF2', salt: salt, iterations: 100000, hash: 'SHA-256' },
                keyMaterial,
                { name: 'AES-GCM', length: 256 },
                false,
                ['decrypt']
            );

            // Decrypt - if wrong password, this will throw
            await crypto.subtle.decrypt(
                { name: 'AES-GCM', iv: iv },
                key,
                combined
            );

            return true;
        } catch (e) {
            return false;
        }
    }

    // Load all sections
    async function loadSections() {
        var container = document.getElementById('main-content');
        for (var i = 0; i < _s.length; i++) {
            try {
                var resp = await fetch(_s[i]);
                if (resp.ok) {
                    var html = await resp.text();
                    var div = document.createElement('div');
                    div.innerHTML = html;
                    // Execute any <script> tags in loaded HTML
                    var scripts = div.querySelectorAll('script');
                    container.appendChild(div);
                    scripts.forEach(function(oldScript) {
                        var newScript = document.createElement('script');
                        if (oldScript.src) {
                            newScript.src = oldScript.src;
                        } else {
                            newScript.textContent = oldScript.textContent;
                        }
                        oldScript.parentNode.replaceChild(newScript, oldScript);
                    });
                }
            } catch (e) {
                console.log('Failed to load: ' + _s[i]);
            }
        }
    }

    // Initialize interactions after sections loaded
    function initAll() {
        // Scroll reveal
        var obs = new IntersectionObserver(function(entries) {
            entries.forEach(function(entry) {
                if (entry.isIntersecting) entry.target.classList.add('visible');
            });
        }, { threshold: 0.12 });
        document.querySelectorAll('.reveal').forEach(function(el) { obs.observe(el); });

        // Accordions
        document.querySelectorAll('.accordion-trigger').forEach(function(btn) {
            btn.addEventListener('click', function() {
                var content = btn.nextElementSibling;
                var icon = btn.querySelector('.accordion-icon');
                var isOpen = content.style.maxHeight && content.style.maxHeight !== '0px';
                document.querySelectorAll('.accordion-content').forEach(function(c) {
                    c.style.maxHeight = '0px'; c.style.opacity = '0';
                });
                document.querySelectorAll('.accordion-icon').forEach(function(i) {
                    i.style.transform = 'rotate(0deg)';
                });
                if (!isOpen) {
                    content.style.maxHeight = content.scrollHeight + 'px';
                    content.style.opacity = '1';
                    if (icon) icon.style.transform = 'rotate(180deg)';
                }
            });
        });

        // Mobile nav
        var toggle = document.getElementById('mobile-toggle');
        var menu = document.getElementById('mobile-menu');
        if (toggle && menu) {
            toggle.addEventListener('click', function() {
                menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
            });
            menu.querySelectorAll('a').forEach(function(a) {
                a.addEventListener('click', function() { menu.style.display = 'none'; });
            });
        }

        // Header scroll
        var header = document.getElementById('main-header');
        if (header) {
            window.addEventListener('scroll', function() {
                header.classList.toggle('scrolled', window.scrollY > 60);
            });
        }

        // Counter animation
        var counters = document.querySelectorAll('[data-count]');
        var cObs = new IntersectionObserver(function(entries) {
            entries.forEach(function(entry) {
                if (entry.isIntersecting && !entry.target.dataset.counted) {
                    entry.target.dataset.counted = 'true';
                    var target = parseInt(entry.target.dataset.count);
                    var suffix = entry.target.dataset.suffix || '';
                    var prefix = entry.target.dataset.prefix || '';
                    var current = 0, step = target / 40;
                    var timer = setInterval(function() {
                        current += step;
                        if (current >= target) { current = target; clearInterval(timer); }
                        entry.target.textContent = prefix + Math.floor(current).toLocaleString('id-ID') + suffix;
                    }, 30);
                }
            });
        }, { threshold: 0.3 });
        counters.forEach(function(c) { cObs.observe(c); });
    }

    // Handle form submit
    var form = document.getElementById('lock-form');
    var input = document.getElementById('lock-password');
    var errorEl = document.getElementById('lock-error');
    var btnText = document.getElementById('btn-text');
    var spinner = document.getElementById('lock-spinner');
    var submitBtn = document.getElementById('lock-submit');

    form.addEventListener('submit', async function(e) {
        e.preventDefault();
        var pw = input.value.trim();
        if (!pw) { input.focus(); return; }

        // Show loading
        btnText.style.display = 'none';
        spinner.style.display = 'block';
        submitBtn.disabled = true;
        input.classList.remove('error');
        errorEl.textContent = '';

        var valid = await verifyPassword(pw);

        if (valid) {
            // Success - load content
            document.getElementById('lock-screen').classList.add('unlocked');
            var mainContent = document.getElementById('main-content');
            mainContent.classList.add('visible');
            await loadSections();
            initAll();

            // Store session (tab only, not persistent)
            sessionStorage.setItem('_a', '1');
        } else {
            // Wrong password
            btnText.style.display = 'inline';
            spinner.style.display = 'none';
            submitBtn.disabled = false;
            input.classList.add('error');
            errorEl.textContent = 'Password salah. Silakan coba lagi.';
            input.select();
            setTimeout(function() { input.classList.remove('error'); }, 600);
        }
    });

    // Check session (same tab only)
    if (sessionStorage.getItem('_a') === '1') {
        document.getElementById('lock-screen').classList.add('unlocked');
        var mainContent = document.getElementById('main-content');
        mainContent.classList.add('visible');
        loadSections().then(initAll);
    }

    // Toggle password visibility
    window.togglePw = function() {
        var inp = document.getElementById('lock-password');
        var icon = document.getElementById('eye-icon');
        if (inp.type === 'password') {
            inp.type = 'text';
            icon.innerHTML = '<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/>';
        } else {
            inp.type = 'password';
            icon.innerHTML = '<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/>';
        }
    };

    // Anti-inspect measures
    document.addEventListener('contextmenu', function(e) { e.preventDefault(); });
    document.addEventListener('keydown', function(e) {
        if (e.key === 'F12' ||
            (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J' || e.key === 'C')) ||
            (e.ctrlKey && e.key === 'u') ||
            (e.ctrlKey && e.key === 'U')) {
            e.preventDefault();
        }
    });
})();
</script>

</body>
</html>
